"use strict";(self["webpackChunktoutiao_m"]=self["webpackChunktoutiao_m"]||[]).push([[102],{4579:function(t,e,s){s.r(e),s.d(e,{default:function(){return m}});var o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"login-container"},[e("van-nav-bar",{attrs:{title:"登录"},scopedSlots:t._u([{key:"left",fn:function(){return[e("van-icon",{attrs:{name:"cross",size:"18"},on:{click:function(e){return t.$router.back()}}})]},proxy:!0}])}),e("van-form",{ref:"loginForm",on:{submit:t.onSubmit}},[e("van-field",{attrs:{name:"mobile",placeholder:"请输入手机号",rules:t.userFormRules.mobile,type:"number",maxlength:"11"},model:{value:t.user.mobile,callback:function(e){t.$set(t.user,"mobile",e)},expression:"user.mobile"}},[e("i",{staticClass:"toutiao toutiao-shouji",attrs:{slot:"left-icon"},slot:"left-icon"})]),e("van-field",{attrs:{"left-icon":"",name:"code",placeholder:"请输入验证码",rules:t.userFormRules.code,type:"number",maxlength:"6"},scopedSlots:t._u([{key:"button",fn:function(){return[t.iscountshow?e("van-count-down",{attrs:{time:t.time,format:"ss 秒"},on:{finish:function(e){t.iscountshow=!1}}}):e("van-button",{staticClass:"send-sms-btn",attrs:{size:"small",round:"",type:"default","native-type":"button"},on:{click:t.yzmbtn}},[t._v("获取验证码")])]},proxy:!0}]),model:{value:t.user.code,callback:function(e){t.$set(t.user,"code",e)},expression:"user.code"}},[e("i",{staticClass:"toutiao toutiao-yanzhengma",attrs:{slot:"left-icon"},slot:"left-icon"})]),e("div",{staticClass:"login-btn-wrap"},[e("van-button",{staticClass:"login-btn",attrs:{round:"",block:"",type:"info","native-type":"submit"}},[t._v("登录")])],1)],1)],1)},n=[],a=(s(8146),s(8848)),i=(s(7658),s(2900)),r={name:"LoginPage",components:{},props:{},data(){return{time:6e4,iscountshow:!1,user:{mobile:"",code:""},userFormRules:{mobile:[{required:!0,message:"请填写手机号"},{pattern:/1[3|5|7|8]\d{9}/,message:"手机号格式错误"}],code:[{required:!0,message:"请填写验证码"},{pattern:/\d{6}/,message:"验证码格式错误"}]}}},computed:{},watch:{},created(){},mounted(){},methods:{async yzmbtn(){try{await this.$refs.loginForm.validate("mobile"),console.log("验证通过")}catch(t){return console.log("验证失败",t)}console.log("11"),this.iscountshow=!0;try{const t=await(0,i.Q6)(this.user.mobile);console.log(t)}catch(t){this.iscountshow=!1,429===t.response.status?this.$toast(t.response.data.message):this.$toast("发送失败")}},async onSubmit(t){try{const t=this.user;console.log(t);const e=await(0,i.x4)(t);this.$store.commit("setUser",e.data.data),a.Z.success("成功"),this.$router.push("/layout/my"),console.log(e)}catch(e){400==e.response.status?a.Z.fail("手机或验证码错误"):a.Z.fail("登录失败请稍后再试")}}}},l=r,u=s(1001),c=(0,u.Z)(l,o,n,!1,null,"496ec79b",null),m=c.exports}}]);
//# sourceMappingURL=102.67f6ee8e.js.map