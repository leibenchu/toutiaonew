{"version":3,"file":"js/102.67f6ee8e.js","mappings":"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","sources":["webpack://toutiao-m/./src/views/login/index.vue","webpack://toutiao-m/src/views/login/index.vue","webpack://toutiao-m/./src/views/login/index.vue?75e3","webpack://toutiao-m/./src/views/login/index.vue?a173"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"login-container\"},[_c('van-nav-bar',{attrs:{\"title\":\"登录\"},scopedSlots:_vm._u([{key:\"left\",fn:function(){return [_c('van-icon',{attrs:{\"name\":\"cross\",\"size\":\"18\"},on:{\"click\":function($event){return _vm.$router.back()}}})]},proxy:true}])}),_c('van-form',{ref:\"loginForm\",on:{\"submit\":_vm.onSubmit}},[_c('van-field',{attrs:{\"name\":\"mobile\",\"placeholder\":\"请输入手机号\",\"rules\":_vm.userFormRules.mobile,\"type\":\"number\",\"maxlength\":\"11\"},model:{value:(_vm.user.mobile),callback:function ($$v) {_vm.$set(_vm.user, \"mobile\", $$v)},expression:\"user.mobile\"}},[_c('i',{staticClass:\"toutiao toutiao-shouji\",attrs:{\"slot\":\"left-icon\"},slot:\"left-icon\"})]),_c('van-field',{attrs:{\"left-icon\":\"\",\"name\":\"code\",\"placeholder\":\"请输入验证码\",\"rules\":_vm.userFormRules.code,\"type\":\"number\",\"maxlength\":\"6\"},scopedSlots:_vm._u([{key:\"button\",fn:function(){return [(_vm.iscountshow)?_c('van-count-down',{attrs:{\"time\":_vm.time,\"format\":\"ss 秒\"},on:{\"finish\":function($event){_vm.iscountshow = false}}}):_c('van-button',{staticClass:\"send-sms-btn\",attrs:{\"size\":\"small\",\"round\":\"\",\"type\":\"default\",\"native-type\":\"button\"},on:{\"click\":_vm.yzmbtn}},[_vm._v(\"获取验证码\")])]},proxy:true}]),model:{value:(_vm.user.code),callback:function ($$v) {_vm.$set(_vm.user, \"code\", $$v)},expression:\"user.code\"}},[_c('i',{staticClass:\"toutiao toutiao-yanzhengma\",attrs:{\"slot\":\"left-icon\"},slot:\"left-icon\"})]),_c('div',{staticClass:\"login-btn-wrap\"},[_c('van-button',{staticClass:\"login-btn\",attrs:{\"round\":\"\",\"block\":\"\",\"type\":\"info\",\"native-type\":\"submit\"}},[_vm._v(\"登录\")])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"login-container\">\r\n    <van-nav-bar title=\"登录\">\r\n      <template #left>\r\n        <van-icon name=\"cross\" size=\"18\" @click=\"$router.back()\" /> </template\r\n    ></van-nav-bar>\r\n    <van-form @submit=\"onSubmit\" ref=\"loginForm\">\r\n      <van-field\r\n        v-model=\"user.mobile\"\r\n        name=\"mobile\"\r\n        placeholder=\"请输入手机号\"\r\n        :rules=\"userFormRules.mobile\"\r\n        type=\"number\"\r\n        maxlength=\"11\"\r\n      >\r\n        <i slot=\"left-icon\" class=\"toutiao toutiao-shouji\"></i\r\n      ></van-field>\r\n      <van-field\r\n        left-icon\r\n        v-model=\"user.code\"\r\n        name=\"code\"\r\n        placeholder=\"请输入验证码\"\r\n        :rules=\"userFormRules.code\"\r\n        type=\"number\"\r\n        maxlength=\"6\"\r\n        ><i slot=\"left-icon\" class=\"toutiao toutiao-yanzhengma\"></i>\r\n        <template #button>\r\n          <!-- 验证码倒计时 -->\r\n          <van-count-down\r\n            :time=\"time\"\r\n            format=\"ss 秒\"\r\n            v-if=\"iscountshow\"\r\n            @finish=\"iscountshow = false\"\r\n          />\r\n          <van-button\r\n            v-else\r\n            class=\"send-sms-btn\"\r\n            size=\"small\"\r\n            round\r\n            type=\"default\"\r\n            native-type=\"button\"\r\n            @click=\"yzmbtn\"\r\n            >获取验证码</van-button\r\n          >\r\n        </template></van-field\r\n      >\r\n      <div class=\"login-btn-wrap\">\r\n        <van-button\r\n          class=\"login-btn\"\r\n          round\r\n          block\r\n          type=\"info\"\r\n          native-type=\"submit\"\r\n          >登录</van-button\r\n        >\r\n      </div>\r\n    </van-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { login, sendSms } from '@/api/user.js'\r\nimport { Toast } from 'vant'\r\n// import { Toast } from 'vant'\r\nexport default {\r\n  name: 'LoginPage',\r\n  components: {},\r\n  props: {},\r\n  data() {\r\n    return {\r\n      time: 60000,\r\n      //显示验证码标志\r\n      iscountshow: false,\r\n      user: { mobile: '', code: '' },\r\n      userFormRules: {\r\n        mobile: [\r\n          { required: true, message: '请填写手机号' },\r\n          { pattern: /1[3|5|7|8]\\d{9}/, message: '手机号格式错误' }\r\n        ],\r\n        code: [\r\n          { required: true, message: '请填写验证码' },\r\n          {\r\n            pattern: /\\d{6}/,\r\n            message: '验证码格式错误'\r\n          }\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  computed: {},\r\n  watch: {},\r\n  created() {},\r\n  mounted() {},\r\n  methods: {\r\n    //发送验证码\r\n    async yzmbtn() {\r\n      //1.验证手机号\r\n      try {\r\n        await this.$refs.loginForm.validate('mobile')\r\n        console.log('验证通过')\r\n        //validate不传参 验证整个表单\r\n      } catch (e) {\r\n        return console.log('验证失败', e)\r\n      }\r\n      console.log('11')\r\n      //2.验证码倒计时\r\n      this.iscountshow = true\r\n\r\n      try {\r\n        const res = await sendSms(this.user.mobile)\r\n        console.log(res)\r\n      } catch (e) {\r\n        //发送失败 关闭倒计时\r\n        this.iscountshow = false\r\n        if (e.response.status === 429) {\r\n          this.$toast(e.response.data.message)\r\n        } else {\r\n          this.$toast('发送失败')\r\n        }\r\n      }\r\n\r\n      //3.发送验证码\r\n    },\r\n    async onSubmit(values) {\r\n      //1.获取表单数据\r\n      //2.表单验证\r\n      //3.提交表单请求登录\r\n      //4.根据请求响应结果处理后续操作\r\n      try {\r\n        const user = this.user\r\n        console.log(user)\r\n        const res = await login(user)\r\n        this.$store.commit('setUser', res.data.data)\r\n        Toast.success('成功')\r\n        this.$router.push('/layout/my')\r\n        console.log(res)\r\n      } catch (err) {\r\n        if (err.response.status == 400) {\r\n          Toast.fail('手机或验证码错误')\r\n        } else {\r\n          Toast.fail('登录失败请稍后再试')\r\n        }\r\n        // console.log(err)\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.login-container {\r\n  .van-nav-bar__title {\r\n    color: white;\r\n  }\r\n  .van-icon-cross::before {\r\n    content: '\\F042';\r\n    color: white;\r\n  }\r\n  .van-icon-cross::before {\r\n    content: '\\F042';\r\n    color: white;\r\n  }\r\n  .toutiao {\r\n    font-size: 37px;\r\n  }\r\n  .send-sms-btn {\r\n    background-color: #ededed;\r\n    font-size: 0.1rem;\r\n    width: 160px;\r\n    height: 46px;\r\n    // line-height: 46px;\r\n    color: #666;\r\n  }\r\n  .login-btn-wrap {\r\n    padding: 53px 33px;\r\n    .login-btn {\r\n      background-color: #6db4fb;\r\n      border: none;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=496ec79b&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=496ec79b&prod&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"496ec79b\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","attrs","scopedSlots","_u","key","fn","on","$event","$router","back","proxy","ref","onSubmit","userFormRules","mobile","model","value","user","callback","$$v","$set","expression","slot","code","iscountshow","time","yzmbtn","_v","staticRenderFns","name","components","props","data","required","message","pattern","computed","watch","created","mounted","methods","console","component"],"sourceRoot":""}